<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_script_client">
    <sys_script_client action="INSERT_OR_UPDATE">
        <active>true</active>
        <applies_extended>false</applies_extended>
        <condition/>
        <description/>
        <field>car_id</field>
        <global>true</global>
        <isolate_script>true</isolate_script>
        <messages/>
        <name>Gesamtpreis_berechnen</name>
        <order/>
        <script><![CDATA[function onChange(control, oldValue, newValue, isLoading, isTemplate) {
    if (isLoading || newValue === '') {
        return;
    }


    setTimeout(function() {
        var kaution1 = g_form.getValue('car_id.kaution');
        var preisProTag1 = g_form.getValue('car_id.preis_pro_tag');

        //console.log("Die Summe beträgt: " + summe);

        var timeStart = g_form.getValue('time_start');
        var timeEnd = g_form.getValue('time_end');
		var dayPartstart = timeStart.toString().split(".")[0];
		var dayPartend = timeEnd.toString().split(".")[0];
        console.log("istttt::  " , dayPartstart);
		console.log("istttt::  " , dayPartend);
        var timeDiff = parseInt(dayPartend,10) - parseInt(dayPartstart,10);
        //var millisecondsPerDay = 24 * 60 * 60 * 1000; // Number of milliseconds in a day
        
        //var tageAnzahl = Math.ceil(timeDiff / millisecondsPerDay);
        var summe = timeDiff * parseInt(preisProTag1) + parseInt(kaution1);
        //console.log("Die Summe beträgt: " + summe);
        g_form.setValue('final_costs', summe);

        g_form.setValue('buchungstage', timeDiff);

    }, 1000);


    //var start = new GlideDate('x_1112736_vroomvro_buchung');
    //start.setValue(g_form.setValue('time_start'));

    // var end = new GlideDate();
    //end.setValue(g_form.getValue('time_end'));
    //var sub = new GlideDate.subtract(start, end);
    // var dayPart = sub.toString().split(" ")[0].split("-")[2];

    // var tageAnzahl = parseInt(dayPart, 10);

    // g_form.setValue('buchungstage', tageAnzahl);





    // 
}]]></script>
        <sys_class_name>sys_script_client</sys_class_name>
        <sys_created_by>claudia</sys_created_by>
        <sys_created_on>2023-08-25 08:26:08</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_domain_path>/</sys_domain_path>
        <sys_id>1046783a473439107ec50d45d36d43b4</sys_id>
        <sys_mod_count>43</sys_mod_count>
        <sys_name>Gesamtpreis_berechnen</sys_name>
        <sys_overrides/>
        <sys_package display_value="VroomVroom" source="x_1112736_vroomvro">7ee51c1a4730b5107ec50d45d36d4385</sys_package>
        <sys_policy/>
        <sys_scope display_value="VroomVroom">7ee51c1a4730b5107ec50d45d36d4385</sys_scope>
        <sys_update_name>sys_script_client_1046783a473439107ec50d45d36d43b4</sys_update_name>
        <sys_updated_by>bryan</sys_updated_by>
        <sys_updated_on>2023-08-25 11:31:30</sys_updated_on>
        <table>x_1112736_vroomvro_buchung</table>
        <type>onChange</type>
        <ui_type>10</ui_type>
        <view/>
    </sys_script_client>
</record_update>
